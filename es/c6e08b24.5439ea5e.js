(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{238:function(e,r,t){"use strict";t.r(r),t.d(r,"frontMatter",(function(){return l})),t.d(r,"metadata",(function(){return c})),t.d(r,"toc",(function(){return i})),t.d(r,"default",(function(){return s}));var n=t(3),a=t(7),o=(t(0),t(290)),l={title:"Construcci\xf3n de Producci\xf3n"},c={unversionedId:"tutorials/real-world-example-with-react/14-production-build",id:"tutorials/real-world-example-with-react/14-production-build",isDocsHomePage:!1,title:"Construcci\xf3n de Producci\xf3n",description:"Hasta ahora, las aplicaciones front-end y back-end est\xe1n compiladas y servidas por dos servidores de desarrollo diferentes. El siguiente paso es construirlas en una sola lista para producci\xf3n.",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/tutorials/real-world-example-with-react/14-production-build.md",slug:"/tutorials/real-world-example-with-react/14-production-build",permalink:"/es/docs/tutorials/real-world-example-with-react/14-production-build",editUrl:"https://github.com/FoalTS/foal/edit/master/docs/i18n/es/docusaurus-plugin-content-docs/current/tutorials/real-world-example-with-react/14-production-build.md",version:"current",sidebar:"someSidebar",previous:{title:"Protecci\xf3n contra CSRF",permalink:"/es/docs/tutorials/real-world-example-with-react/13-csrf"},next:{title:"Autenticaci\xf3n Social con Google",permalink:"/es/docs/tutorials/real-world-example-with-react/15-social-auth"}},i=[{value:"Construir la aplicaci\xf3n React",id:"construir-la-aplicaci\xf3n-react",children:[]},{value:"Prevenci\xf3n de errores 404",id:"prevenci\xf3n-de-errores-404",children:[]},{value:"Construir la aplicaci\xf3n Foal",id:"construir-la-aplicaci\xf3n-foal",children:[]}],p={toc:i};function s(e){var r=e.components,t=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},p,t,{components:r,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Hasta ahora, las aplicaciones front-end y back-end est\xe1n compiladas y servidas por dos servidores de desarrollo diferentes. El siguiente paso es construirlas en una sola lista para producci\xf3n."),Object(o.b)("h2",{id:"construir-la-aplicaci\xf3n-react"},"Construir la aplicaci\xf3n React"),Object(o.b)("p",null,"En su directorio de front-end, ejecute el siguiente comando:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"npm run build\n")),Object(o.b)("p",null,"Este comando construye la aplicaci\xf3n React para producci\xf3n y guarda los archivos en el directorio ",Object(o.b)("inlineCode",{parentName:"p"},"build"),"."),Object(o.b)("p",null,"\xc1bralo y copie todo su contenido en el directorio ",Object(o.b)("inlineCode",{parentName:"p"},"public")," de su aplicaci\xf3n Foal."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"Cuando utilice ",Object(o.b)("inlineCode",{parentName:"p"},"foal connect")," con Angular o Vue, el frontend build guardar\xe1 autom\xe1ticamente los archivos en ",Object(o.b)("inlineCode",{parentName:"p"},"public"),".")),Object(o.b)("p",null,"Ahora, si navega a ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"http://localhost:3001"}),"http://localhost:3001"),", ver\xe1 la aplicaci\xf3n frontend servida por el servidor backend."),Object(o.b)("h2",{id:"prevenci\xf3n-de-errores-404"},"Prevenci\xf3n de errores 404"),Object(o.b)("p",null,"Abra el enlace ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"http://localhost:3001/login"}),"http://localhost:3001/login")," en una nueva pesta\xf1a. El servidor devuelve un error 404."),Object(o.b)("p",null,"Esto es perfectamente normal. En este momento, el servidor no tiene un manejador para la ruta ",Object(o.b)("inlineCode",{parentName:"p"},"/login")," y por lo tanto devuelve este error. Anteriormente, este problema era manejado por el servidor de desarrollo de React, por lo que no exist\xeda este error."),Object(o.b)("p",null,"Para resolver este problema, a\xf1adir\xe1 un m\xe9todo de controlador que procesar\xe1 las peticiones no gestionadas."),Object(o.b)("p",null,"Abra ",Object(o.b)("inlineCode",{parentName:"p"},"app.controller.ts")," y actualice su contenido."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"import { Context, controller, Get, HttpResponseNotFound, IAppController, render } from '@foal/core';\nimport { createConnection } from 'typeorm';\n\nimport { ApiController, OpenapiController } from './controllers';\n\nexport class AppController implements IAppController {\n  subControllers = [\n    controller('/api', ApiController),\n    controller('/swagger', OpenapiController)\n  ];\n\n  async init() {\n    await createConnection();\n  }\n\n  @Get('*')\n  renderApp(ctx: Context) {\n    if (!ctx.request.accepts('html')) {\n      return new HttpResponseNotFound();\n    }\n\n    return render('./public/index.html');\n  }\n}\n\n")),Object(o.b)("p",null,"Este m\xe9todo devuelve la aplicaci\xf3n React para cualquier solicitud GET que acepte contenido HTML y que no haya sido manejada por los otros m\xe9todos del controlador y sus subcontroladores."),Object(o.b)("p",null,"Si vuelve a ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"http://localhost:3001/login"}),"http://localhost:3001/login")," y actualiza la p\xe1gina, deber\xeda aparecer la p\xe1gina de acceso."),Object(o.b)("h2",{id:"construir-la-aplicaci\xf3n-foal"},"Construir la aplicaci\xf3n Foal"),Object(o.b)("p",null,"Ahora, si quiere construir la aplicaci\xf3n backend para no utilizar la opci\xf3n ",Object(o.b)("inlineCode",{parentName:"p"},"npm run develop"),", puede ejecutar este comando:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"npm run build\n")),Object(o.b)("p",null,"Luego, para lanzar la aplicaci\xf3n, simplemente ejecute lo siguiente:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"npm run start\n")))}s.isMDXComponent=!0},290:function(e,r,t){"use strict";t.d(r,"a",(function(){return u})),t.d(r,"b",(function(){return m}));var n=t(0),a=t.n(n);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=a.a.createContext({}),s=function(e){var r=a.a.useContext(p),t=r;return e&&(t="function"==typeof e?e(r):c(c({},r),e)),t},u=function(e){var r=s(e.components);return a.a.createElement(p.Provider,{value:r},e.children)},d={inlineCode:"code",wrapper:function(e){var r=e.children;return a.a.createElement(a.a.Fragment,{},r)}},b=a.a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=s(t),b=n,m=u["".concat(l,".").concat(b)]||u[b]||d[b]||o;return t?a.a.createElement(m,c(c({ref:r},p),{},{components:t})):a.a.createElement(m,c({ref:r},p))}));function m(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var o=t.length,l=new Array(o);l[0]=b;var c={};for(var i in r)hasOwnProperty.call(r,i)&&(c[i]=r[i]);c.originalType=e,c.mdxType="string"==typeof e?e:n,l[1]=c;for(var p=2;p<o;p++)l[p]=t[p];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);