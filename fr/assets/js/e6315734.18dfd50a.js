(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4006],{3905:function(e,r,t){"use strict";t.d(r,{Zo:function(){return c},kt:function(){return m}});var n=t(7294);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=n.createContext({}),p=function(e){var r=n.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):l(l({},r),e)),t},c=function(e){var r=p(e.components);return n.createElement(s.Provider,{value:r},e.children)},u={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},g=n.forwardRef((function(e,r){var t=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),g=p(t),m=o,f=g["".concat(s,".").concat(m)]||g[m]||u[m]||a;return t?n.createElement(f,l(l({ref:r},c),{},{components:t})):n.createElement(f,l({ref:r},c))}));function m(e,r){var t=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=t.length,l=new Array(a);l[0]=g;var i={};for(var s in r)hasOwnProperty.call(r,s)&&(i[s]=r[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var p=2;p<a;p++)l[p]=t[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}g.displayName="MDXCreateElement"},5840:function(e,r,t){"use strict";t.r(r),t.d(r,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return g}});var n=t(2122),o=t(9756),a=(t(7294),t(3905)),l=["components"],i={title:"Test de l'API avec Swagger",id:"tuto-6-swagger-interface",slug:"6-swagger-interface"},s=void 0,p={unversionedId:"tutorials/real-world-example-with-react/tuto-6-swagger-interface",id:"tutorials/real-world-example-with-react/tuto-6-swagger-interface",isDocsHomePage:!1,title:"Test de l'API avec Swagger",description:"Maintenant que le premier point de terminaison a \xe9t\xe9 impl\xe9ment\xe9, l'\xe9tape suivante consiste \xe0 le tester.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/tutorials/real-world-example-with-react/6-swagger-interface.md",sourceDirName:"tutorials/real-world-example-with-react",slug:"/tutorials/real-world-example-with-react/6-swagger-interface",permalink:"/fr/docs/tutorials/real-world-example-with-react/6-swagger-interface",editUrl:"https://github.com/FoalTS/foal/edit/master/docs/docs/tutorials/real-world-example-with-react/6-swagger-interface.md",version:"current",sidebarPosition:6,frontMatter:{title:"Test de l'API avec Swagger",id:"tuto-6-swagger-interface",slug:"6-swagger-interface"},sidebar:"someSidebar",previous:{title:"Votre Premi\xe8re Route",permalink:"/fr/docs/tutorials/real-world-example-with-react/5-our-first-route"},next:{title:"L'Application Frontend",permalink:"/fr/docs/tutorials/real-world-example-with-react/7-add-frontend"}},c=[],u={toc:c};function g(e){var r=e.components,i=(0,o.Z)(e,l);return(0,a.kt)("wrapper",(0,n.Z)({},u,i,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Maintenant que le premier point de terminaison a \xe9t\xe9 impl\xe9ment\xe9, l'\xe9tape suivante consiste \xe0 le tester."),(0,a.kt)("p",null,"Pour ce faire, vous allez g\xe9n\xe9rer une page de documentation compl\xe8te de votre API \xe0 partir de laquelle vous pourrez envoyer des requ\xeates. Cette page sera g\xe9n\xe9r\xe9e \xe0 l'aide de ",(0,a.kt)("a",{parentName:"p",href:"https://swagger.io/tools/swagger-ui/"},"Swagger UI")," et de la ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/OAI/OpenAPI-Specification/"},"sp\xe9cification OpenAPI"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @foal/swagger\n")),(0,a.kt)("p",null,"Tout d'abord, fournissez quelques informations pour d\xe9crire votre API de mani\xe8re globale."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { ApiInfo, ApiServer, controller } from '@foal/core';\nimport { StoriesController } from './api';\n\n@ApiInfo({\n  title: 'Application API',\n  version: '1.0.0'\n})\n@ApiServer({\n  url: '/api'\n})\nexport class ApiController {\n\n  subControllers = [\n    controller('/stories', StoriesController),\n  ];\n\n}\n\n")),(0,a.kt)("p",null,"Ensuite, g\xe9n\xe9rez un nouveau contr\xf4leur. Celui-ci sera en charge du rendu de la nouvelle page."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"foal generate controller openapi --register\n")),(0,a.kt)("p",null,"Faites en sorte que la classe g\xe9n\xe9r\xe9e \xe9tende la classe abstraite ",(0,a.kt)("inlineCode",{parentName:"p"},"SwaggerController"),". Et ensuite, fournissez le contr\xf4leur racine de votre API comme option au contr\xf4leur."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { SwaggerController } from '@foal/swagger';\nimport { ApiController } from './api.controller';\n\nexport class OpenapiController extends SwaggerController  {\n\n  options = {\n    controllerClass: ApiController\n  }\n\n}\n")),(0,a.kt)("p",null,"Enfin, mettez \xe0 jour votre fichier ",(0,a.kt)("inlineCode",{parentName:"p"},"app.controller.ts")," afin que la page Swagger UI soit disponible \xe0 l'adresse ",(0,a.kt)("a",{parentName:"p",href:"http://localhost:3001/swagger"},"/swagger"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { controller, IAppController } from '@foal/core';\nimport { createConnection } from 'typeorm';\n\nimport { ApiController, OpenapiController } from './controllers';\n\nexport class AppController implements IAppController {\n  subControllers = [\n    controller('/api', ApiController),\n    controller('/swagger', OpenapiController)\n  ];\n\n  async init() {\n    await createConnection();\n  }\n}\n\n")),(0,a.kt)("p",null,"Si vous naviguez vers ",(0,a.kt)("a",{parentName:"p",href:"http://localhost:3001/swagger"},"http://localhost:3001/swagger"),", vous verrez la page de documentation g\xe9n\xe9r\xe9e \xe0 partir de votre code."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Swagger page",src:t(7169).Z})),(0,a.kt)("p",null,"Cliquez maintenant sur le bouton ",(0,a.kt)("em",{parentName:"p"},"Try it out"),". Les champs deviennent \xe9ditables et vous pouvez envoyer des requ\xeates pour tester votre API."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Swagger page",src:t(5302).Z})))}g.isMDXComponent=!0},7169:function(e,r,t){"use strict";r.Z=t.p+"assets/images/swagger1-3abe32cd345086f35f191e1284daa45e.png"},5302:function(e,r,t){"use strict";r.Z=t.p+"assets/images/swagger2-a7c73effa7473d646ed981f1f55acd4f.png"}}]);