(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{214:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return o})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return s}));var a=n(3),r=n(7),l=(n(0),n(268)),i={title:"Templates - Server-Side Rendering",sidebar_label:"Templates (SSR)"},o={unversionedId:"utilities/templating",id:"version-1.x/utilities/templating",isDocsHomePage:!1,title:"Templates - Server-Side Rendering",description:"Regular Web Applications rely on templates to dynamically generate HTML pages on the server. These templates are text files that contain static content as well as a special syntax describing how the data should be inserted dynamically. During an HTTP request, the application loads and renders the template using the given contextual data and sends back the page to the client.",source:"@site/versioned_docs/version-1.x/utilities/templating.md",slug:"/utilities/templating",permalink:"/docs/1.x/utilities/templating",editUrl:"https://github.com/FoalTS/foal/edit/master/docs/versioned_docs/version-1.x/utilities/templating.md",version:"1.x",sidebar_label:"Templates (SSR)",sidebar:"someSidebar",previous:{title:"XSS Protection",permalink:"/docs/1.x/security/xss-protection"},next:{title:"Logging & Debugging",permalink:"/docs/1.x/utilities/logging-and-debugging"}},c=[{value:"Rendering Templates",id:"rendering-templates",children:[]},{value:"Using Another Template Engine",id:"using-another-template-engine",children:[]},{value:"Templates Location",id:"templates-location",children:[]},{value:"The Legacy Package <code>@foal/ejs</code>",id:"the-legacy-package-foalejs",children:[]}],p={toc:c};function s(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"Regular Web Applications rely on ",Object(l.b)("em",{parentName:"p"},"templates")," to dynamically generate HTML pages on the server. These templates are text files that contain static content as well as a special syntax describing how the data should be inserted dynamically. During an HTTP request, the application loads and renders the template using the given contextual data and sends back the page to the client."),Object(l.b)("p",null,"This technique is known as ",Object(l.b)("em",{parentName:"p"},"Server-Side Rendering (or SSR)"),"."),Object(l.b)("p",null,"Here is an example of what a template might look like:"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <title>{% title %}</title>\n</head>\n<body>\n  {% for user in users %}\n    * {{ user.name }}\n  {% else %}\n      No users have been found.\n  {% endfor %}\n</body>\n</html>\n')),Object(l.b)("h2",{id:"rendering-templates"},"Rendering Templates"),Object(l.b)("p",null,"FoalTS provides a minimalist template engine to render templates. This engine replaces all the occurrences of ",Object(l.b)("inlineCode",{parentName:"p"},"{{ myVariableName }}")," with the given values."),Object(l.b)("p",null,"Here is an example showing how to use it:"),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"templates/index.html")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <title>{{ title }}</title>\n</head>\n<body>\n  Hello {{ name }}!\n</body>\n</html>\n')),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"src/app/app.controller.ts")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),"import { Get, render } from '@foal/core';\n\nexport class AppController {\n  @Get('/')\n  index() {\n    return render('./templates/index.html', {\n      name: 'Alix',\n      title: 'Home'\n    });\n  }\n}\n")),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"Output (GET /)")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <title>Home</title>\n</head>\n<body>\n  Hello Alix!\n</body>\n</html>\n')),Object(l.b)("h2",{id:"using-another-template-engine"},"Using Another Template Engine"),Object(l.b)("p",null,"External template engines, such as ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.npmjs.com/package/ejs"}),"EJS")," or ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.npmjs.com/package/pug"}),"pug"),", are also supported and can be configured for the current project using the configuration key ",Object(l.b)("inlineCode",{parentName:"p"},"settings.templateEngine"),"."),Object(l.b)("p",null,"Here is an example showing how to configure ",Object(l.b)("inlineCode",{parentName:"p"},"config/default.json")," (or ",Object(l.b)("inlineCode",{parentName:"p"},"config/default.yml"),") with ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.npmjs.com/package/twig"}),"twig"),", a JS implementation of the Twig PHP templating language."),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),"npm install twig\n")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "settings": {\n    "templateEngine": "twig"\n    ...\n  }\n  ...\n}\n')),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),"settings:\n  templateEngine: twig\n  ...\n...\n")),Object(l.b)("p",null,"Then the ",Object(l.b)("inlineCode",{parentName:"p"},"render")," function uses this engine under the hood to render the templates."),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"Note: Only ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://expressjs.com/en/resources/template-engines.html"}),"Express compatible")," template engines are supported (which represents the large majority of those available on npm).")),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"templates/index.html (Twig example)")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <title>Users</title>\n</head>\n<body>\n  <ul>\n    {% for user in users %}\n      <li>{{ user.name }}</li>\n    {% endfor %}\n  </ul>\n</body>\n</html>\n')),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"src/app/app.controller.ts (Twig example)")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),"import { Get } from '@foal/core';\n\nexport class AppController {\n  @Get('/')\n  index() {\n    return render('./templates/index.html', {\n      users: [\n        { name: 'John' },\n        { name: 'Mary' }\n      ]\n    });\n  }\n}\n")),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"Output (GET /) (Twig example)")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <title>Users</title>\n</head>\n<body>\n  <ul>\n    <li>John</li>\n    <li>Mary</li>\n  </ul>\n</body>\n</html>\n')),Object(l.b)("h2",{id:"templates-location"},"Templates Location"),Object(l.b)("p",null,"By default, the ",Object(l.b)("inlineCode",{parentName:"p"},"render")," function loads templates from the project root directory."),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),"// |- config\n// |- src\n// '- templates\n//   '- login.html\nrender('./templates/login.html', { /* ... */ })\n")),Object(l.b)("p",null,"But the path can also be relative to the controller file. The ",Object(l.b)("inlineCode",{parentName:"p"},"render")," function accepts a third parameter ",Object(l.b)("inlineCode",{parentName:"p"},"dirname")," for this purpose."),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),"/* login.controller.ts */\n\n// |- config\n// '- src\n//   '- app\n//     '- controllers\n//       |- templates\n//       | '- login.html\n//       '- login.controller.ts\nrender('./templates/login.html', { /* ... */ }, __dirname)\n")),Object(l.b)("h2",{id:"the-legacy-package-foalejs"},"The Legacy Package ",Object(l.b)("inlineCode",{parentName:"h2"},"@foal/ejs")),Object(l.b)("p",null,"Previous versions of FoalTS (<v1.0.0) only accepted a certain format for template engines. The package ",Object(l.b)("inlineCode",{parentName:"p"},"@foal/ejs")," was an adapter of EJS for the framework. Since FoalTS now supports Express-compatible template engines, prefer using the ",Object(l.b)("inlineCode",{parentName:"p"},"ejs")," library directly in the future."))}s.isMDXComponent=!0},268:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),s=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=s(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,i=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),m=s(n),u=a,d=m["".concat(i,".").concat(u)]||m[u]||b[u]||l;return n?r.a.createElement(d,o(o({ref:t},p),{},{components:n})):r.a.createElement(d,o({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=u;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);